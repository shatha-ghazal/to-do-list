<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>To-Do List with JSONPlaceholder</title>
  <!-- Bootstrap CSS CDN -->
  
  <link rel="stylesheet" type="text/css" href="s-tyle.css">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">

    

 
</head>
<body class="bg-light" >
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
    
  <div id="dev" class="container py-4"style="width:65%" >
    <h1 id="to-do-h" class="mb-4 text-center" >üìù To-Do List</h1>
    <form id="todo-form" class="input-group mb-4" style="background-color: lightpink">
      <input
        type="text"
        id="new-todo"
        class="form-control"
        placeholder="Add new todo"
        required
      />
      <button id="btn" class="btn btn-primary" type="submit" >Add</button>
    </form>
    <ul id="todo-list" class="list-group"  ></ul>
  </div>

  <script>
    const apiUrl = 'https://jsonplaceholder.typicode.com/todos';
    const todoList = document.getElementById('todo-list');
    const form = document.getElementById('todo-form');
    const newTodoInput = document.getElementById('new-todo');

    // 1. Load Todos
    async function fetchTodos() {
      const res = await fetch(`${apiUrl}?_limit=10`);
      const todos = await res.json();
      todos.forEach(addTodoToDOM);
    }

    // 2. Add Todo to DOM
    function addTodoToDOM(todo) {
      const li = document.createElement('li');
      li.dataset.id = todo.id;
      li.className = 'list-group-item d-flex justify-content-between align-items-center';
      if (todo.completed) li.classList.add('completed');

      li.innerHTML = `
        <div class="form-check">
          <input class="form-check-input" style="background-color:purple ; border:0px" type="checkbox" ${todo.completed ? 'checked' : ''}>
          <span class="ms-2">${todo.title}</span>
        </div>
        <button class="btn btn-sm btn-danger delete"  style="background-color:purple ; color:white ; width:100px">Delete</button>
      `;
      todoList.appendChild(li);
    }

    // 3. Add New Todo (POST)
    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      const title = newTodoInput.value.trim();
      if (!title) return;

      const res = await fetch(apiUrl, {
        method: 'POST',
        body: JSON.stringify({ title, completed: false, userId: 1 }),
        headers: {
          'Content-type': 'application/json; charset=UTF-8',
        },
      });
      const newTodo = await res.json();
      addTodoToDOM(newTodo);
      newTodoInput.value = '';
    });

    // 4. Handle Clicks (Complete / Delete)
    todoList.addEventListener('click', async (e) => {
      const li = e.target.closest('li');
      const id = li.dataset.id;

      // Toggle completion
      if (e.target.type === 'checkbox') {
        const completed = e.target.checked;
        await fetch(`${apiUrl}/${id}`, {
          method: 'PATCH',
          body: JSON.stringify({ completed }),
          headers: {
            'Content-type': 'application/json; charset=UTF-8',
          },
        });
        li.classList.toggle('completed', completed);
      }

      // Delete todo
      if (e.target.classList.contains('delete')) {
        await fetch(`${apiUrl}/${id}`, { method: 'DELETE' });
        li.remove();
      }
    });

    // Initial load
    fetchTodos();
  </script>

  
</body>
</html>